<template>
    <div class="slds-form-element">
        <div class="slds-combobox_container">
            <div class={getComboboxClass}>

                <template if:true={readonlyrecord}>
                    <lightning-icon
                    icon-name={leftIcon}
                    size="x-small"
                    alternative-text="Search icon"
                    class={getLeftIconClass}
                    ></lightning-icon>
                    <input 
                    type="text"
                    read-only="true"
                    aria-autocomplete="list"
                    aria-controls="listbox"
                    autocomplete="off"
                    role="textbox"
                    id="combobox1"
                    disabled
                    value={getInputValue}
                    class={getInputClass}
                    onclick={showDropDown}
                    style="background:white;border: 1px solid #8080802e;"
                    onmouseout={inputOnMouseOut}
                />  
                </template>

                <template if:false={readonlyrecord}>
                    <lightning-icon
                    icon-name={leftIcon}
                    size="x-small"
                    alternative-text="Search icon"
                    class={getLeftIconClass}
                    ></lightning-icon>
                    <input 
                    type="text"
                    read-only="true"
                    aria-autocomplete="list"
                    aria-controls="listbox"
                    autocomplete="off"
                    role="textbox"
                    id="combobox"
                    value={getInputValue}
                    class={getInputClass}
                    onclick={showDropDown}
                    style="background:white;border: 1px solid #8080802e;"
                    onmouseout={inputOnMouseOut}
                    />
                    <lightning-icon
                    icon-name={rightIcon}
                    size="x-small"
                    alternative-text="Search icon"
                    class={getRightIconClass}
                ></lightning-icon>
                </template>
               
                
                <div  id="listbox" role="listbox" onmouseleave={dropDownOnMouseOut} onmouseenter={dropDownOnMouseEnter}>
                    <ul class={getListboxClass} role="presentation" style="max-height: 148px; overflow-y: auto;">
                        <template
                            for:each={picklistResults}
                            for:item="result"
                        >
                            <li
                                key={result.id}
                                role="presentation"
                                class="slds-listbox__item"
                            >
                                <span
                                    class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta"
                                    role="option"
                                    data-recordid={result.id}
                                    onclick={handleResultClick}
                                >
                                    <span class="slds-media__figure">
                                        <lightning-icon
                                            icon-name={result.icon}
                                            size="small"
                                            alternative-text="Result item icon"
                                        ></lightning-icon>
                                    </span>
                                    <span class="slds-media__body">
                                        <span
                                            class="slds-listbox__option-text slds-listbox__option-text_entity"
                                            >{result.title}
                                    </span>
                                    
                                    </span>
                                </span>
                            </li>
                        </template>
                    </ul>
                </div>                
            </div>        
        </div>    
    </div>       
</template>